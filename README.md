# soil-moisture-watering
乾燥しているときに自動で水やりする装置

<大まかな仕組み>
土壌の湿度によって抵抗が変化することを利用して、
オペアンプで差分増幅回路を作り、基板内の既知の抵抗との比を電圧として出力してもらい、
それをマイコン（stm32g0シリーズ）のadcで読み取とり、
閾値を超えるとトランジェスタをHIGHにしてスイッチングをし、
モーターポンプに電気が流れるようにしてある。

<工夫>
疑似的に電気分解回路となるので、電極が錆びないよう土壌の湿度を半時間おきに判定する。
ノイズなどミスを減らすため、閾値判定は１０回行う。
LED点滅により、測定値を２進数で分かるようにしてある。
夏の晴天時などの乾燥対策のため、水やり判定が繰り返されるごとに判定周期を短くした。（連続が途絶えると周期は戻した。）
電極の錆びによるずれをプログラムの変更なしに調節できるよう、オペアンプ回路に可変抵抗を挟んだ。
電源としてtype-cを選定した。

<耐久性など>
１年間使用で正常動作を確認
モーターポンプの藻の詰まり（掃除により解決）
肥料不足による電解質減少による判定異常（肥料を加えると直る）
